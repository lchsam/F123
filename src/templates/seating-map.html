{# 

This is the shape of the plane compartmentalized into 15 sections
+---------------------------------------------------------------------+              
|+---A-----+ +----D-----+ +----G-----+ +-----J------+ +------M------+ |              
|+---------+ +----------+ +----------+ +------------+ +-------------+ |              
|     +----+ +----------+ +----------+ +------------+ +-------------+ |              
|     | B  | |    E     | |    H     | |     K      | |      N      | |              
|     +----+ +----------+ +----------+ +------------+ +-------------+ |              
|+---C-----+ +----F-----+ +----I-----+ +-----L------+ +------O------+ |              
|+---------+ +----------+ +----------+ +------------+ +-------------+ |              
+---------------------------------------------------------------------+

Nunjucks do not allow inline comments so I have to create a new property in the object for comments
#}

{% set xOffset = 0.0536 %}
{% set yOffset = 0.038 %}
<!-- xOffset is the distance between seats left and right -->

{% set seatFillPositions = [
    { startPos: { x: 0.743, y: 0.204 }, row: 1, col: 13, comment: 'Section M' },
    { startPos: { x: 0.743, y: 0.166 }, row: 1, col: 3 },
    { startPos: { x: 0.743, y: 0.128 }, row: 1, col: 16 },
    { startPos: { x: 1.0646, y: 0.166 }, row: 1, col: 1 },
    { startPos: { x: 1.1718, y: 0.166 }, row: 1, col: 8 },
    
    { startPos: { x: 0.7966, y: 0.057 }, row: 2, col: 9, comment: 'Section N' },
    { startPos: { x: 1.2790, y: 0.057 }, row: 1, col: 8 },
    { startPos: { x: 1.4398, y: 0.019 }, row: 1, col: 5 },
    { startPos: { x: 0.7966, y: -0.019 }, row: 1, col: 1 },
    { startPos: { x: 0.9038, y: -0.019 }, row: 1, col: 6 },
    { startPos: { x: 1.3326, y: -0.019 }, row: 1, col: 3 },
    { startPos: { x: 1.6006, y: -0.019 }, row: 1, col: 2 },
    { startPos: { x: 0.7966, y: -0.057 }, row: 1, col: 10 },
    { startPos: { x: 1.3862, y: -0.057 }, row: 1, col: 5 },

    { startPos: { x: 0.743, y: -0.133 }, row: 1, col: 12, comment: 'Section O' },
    { startPos: { x: 1.3862, y: -0.12 }, row: 1, col: 1 },
    { startPos: { x: 1.4934, y: -0.12 }, row: 1, col: 2 },
    { startPos: { x: 0.743, y: -0.171 }, row: 1, col: 4 },
    { startPos: { x: 1.0646, y: -0.171 }, row: 1, col: 6 },
    { startPos: { x: 1.3862, y: -0.158 }, row: 1, col: 4 },
    { startPos: { x: 0.743, y: -0.209 }, row: 1, col: 12 },
    { startPos: { x: 1.3862, y: -0.196 }, row: 1, col: 1 },

    { startPos: { x: 0.0485, y: 0.204 }, row: 1, col: 11, comment: 'Section J' },
    { startPos: { x: 0.0485, y: 0.204 - yOffset }, row: 1, col: 4 },
    { startPos: { x: 0.0485 + 5 * xOffset, y: 0.204 - yOffset }, row: 1, col: 1 },
    { startPos: { x: 0.0485 + 9 * xOffset, y: 0.204 - yOffset }, row: 1, col: 2 },
    { startPos: { x: 0.0485, y: 0.204 - 2 * yOffset }, row: 1, col: 11 },

    { startPos: { x: 0.1021, y: 0.052 }, row: 1, col: 9, comment: 'Section K' },
    { startPos: { x: 0.1021, y: 0.052 - yOffset }, row: 1, col: 4 },
    { startPos: { x: 0.1021 + 7 * xOffset, y: 0.052 - yOffset }, row: 1, col: 2 },
    { startPos: { x: 0.1021, y: 0.052 - 2 * yOffset }, row: 1, col: 4 },
    { startPos: { x: 0.1021 + 8 * xOffset, y: 0.052 - 2 * yOffset }, row: 1, col: 1 },
    { startPos: { x: 0.1021, y: 0.052 - 3 * yOffset }, row: 1, col: 9 },

    { startPos: { x: 0.0485, y: -0.133 }, row: 1, col: 11, comment: 'Section L' },
    { startPos: { x: 0.0485, y: -0.133 - yOffset }, row: 1, col: 4 },
    { startPos: { x: 0.0485 + 5 * xOffset, y: -0.133 - yOffset }, row: 1, col: 1 },
    { startPos: { x: 0.0485 + 7 * xOffset, y: -0.133 - yOffset }, row: 1, col: 3 },
    { startPos: { x: 0.0485, y: -0.133 - 2 * yOffset }, row: 1, col: 11 },

    { startPos: { x: -0.75014, y: 0.204 }, row: 3, col: 13, comment: 'Section G' },

    { startPos: { x: -0.69654, y: 0.052 }, row: 1, col: 12, comment: 'Section H' },
    { startPos: { x: -0.69654, y: 0.052 - yOffset }, row: 1, col: 7 },
    { startPos: { x: -0.69654 + 9 * xOffset, y: 0.052 - yOffset }, row: 1, col: 3 },
    { startPos: { x: -0.69654, y: 0.052 - 2 * yOffset }, row: 1, col: 6 },
    { startPos: { x: -0.69654 + 7 * xOffset, y: 0.052 - 2 * yOffset }, row: 1, col: 5 },
    { startPos: { x: -0.69654, y: 0.052 - 3 * yOffset }, row: 1, col: 12 },

    { startPos: { x: -0.69654 - xOffset, y: -0.133 }, row: 3, col: 13, comment: 'Section I' },

    { startPos: { x: -1.2245, y: 0.052 }, row: 4, col: 6, comment: 'Section E' },

    { startPos: { x: -1.2245 - 2 * xOffset, y: 0.052 + 3.3 * yOffset }, row: 3, col: 1, comment: 'Section D' },
    { startPos: { x: -1.2245 - 1 * xOffset, y: 0.052 + 3.4 * yOffset }, row: 3, col: 1 },
    { startPos: { x: -1.2245 - 0 * xOffset, y: 0.052 + 3.5 * yOffset }, row: 3, col: 1 },
    { startPos: { x: -1.2245 + 1 * xOffset, y: 0.052 + 3.6 * yOffset }, row: 3, col: 3 },
    { startPos: { x: -1.2245 + 4 * xOffset, y: 0.052 + 3.7 * yOffset }, row: 3, col: 3 },

    { startPos: { x: -1.2245 - 2 * xOffset, y: -0.062 - 1.3 * yOffset }, row: 3, col: 1, comment: 'Section F' },
    { startPos: { x: -1.2245 - 1 * xOffset, y: -0.062 - 1.4 * yOffset }, row: 3, col: 1 },
    { startPos: { x: -1.2245 - 0 * xOffset, y: -0.062 - 1.5 * yOffset }, row: 3, col: 1 },
    { startPos: { x: -1.2245 + 1 * xOffset, y: -0.062 - 1.6 * yOffset }, row: 3, col: 3 },
    { startPos: { x: -1.2245 + 4 * xOffset, y: -0.062 - 1.7 * yOffset }, row: 3, col: 3 },

    { startPos: { x: -1.56218, y: 0.014 }, row: 2, col: 2, comment: 'Section B' },

    { startPos: { x: -1.890, y: 0.087 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 }, comment: 'Section A' },
    { startPos: { x: -1.884, y: 0.049 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.839, y: 0.105 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.833, y: 0.067 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.786, y: 0.118 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.78, y: 0.08 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.774, y: 0.043 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.731, y: 0.131 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.725, y: 0.093 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.719, y: 0.056 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.679, y: 0.141 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.673, y: 0.103 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.667, y: 0.066 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.628, y: 0.148 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.622, y: 0.11 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.616, y: 0.073 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.577, y: 0.157 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.571, y: 0.119 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.565, y: 0.082 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.523, y: 0.164 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.517, y: 0.126 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },
    { startPos: { x: -1.511, y: 0.089 }, row: 1, col: 1, rotation: { x: 0, y: 9, z: 0 } },

    { startPos: { x: -1.881, y: -0.056 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 }, comment: 'Section C' },
    { startPos: { x: -1.887, y: -0.093 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.83, y: -0.07 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.837, y: -0.107 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.773, y: -0.049 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.78, y: -0.086 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.786, y: -0.124 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.721, y: -0.061 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.728, y: -0.098 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.734, y: -0.136 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.665, y: -0.071 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.672, y: -0.108 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.678, y: -0.146 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.614, y: -0.08 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.621, y: -0.117 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.627, y: -0.155 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.563, y: -0.087 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.57, y: -0.124 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.576, y: -0.162 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.513, y: -0.095 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.52, y: -0.132 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } },
    { startPos: { x: -1.526, y: -0.17 }, row: 1, col: 1, rotation: { x: 0, y: -9, z: 0 } }
  ] 
%}





<!-- rotation="-50 0 0"  -->
<a-entity rotation="-50 0 0"  position="0 0.05 0">
  <a-entity class="seatingCabinLegend" 
            text="font: aileronsemibold; value: survivors; align: center; color: #ebebeb; width: 1;"
            position="0.034 0.188"
            mixin="narrationTextMixin eventDisappearMixin"></a-entity>
  <a-entity class="seatingCabinLegend"
            gltf-model="#lowPolyOrangePlaneSeat"
            model-unlit
            position="-0.096 0.160 0"
            rotation="30 0 0"
            scale="0.05 0.05 0.05"
            mixin="narrationModelItemMixin eventDisappearMixin"></a-entity>
</a-entity>

<a-entity id="seatingChartParent" scale="0.7 0.7 0.7" event-bubbler="eventName: loaded; once: true"
          mixin="rotateChartMixin">
  
  <a-image id="jal123SeatingChartEntity"
           src="#jal123SeatingChartImage"
           width="3.95"
           height="0.5"
           material="transparent: true;"
           position="-0.115 0 0"
           mixin="narrationItemMixin eventDisappearMixin">
  </a-image>
  
  <a-entity id="survivorSeatLabels" mixin="eventDisappearMixin">
    <a-entity id="orangeSurvivorSeatsEntity"
              gltf-model="#lowPolyOrangePlaneSeat"
              instance-gltf
              model-unlit
              rotation="0 -90 -90"
              scale="0.06 0.06 0.06"
              mixin="narrationModelItemMixin">
      <a-gltf-instance position="1.3326 0.019 0"></a-gltf-instance>
      <a-gltf-instance position="1.3326 -0.057 0"></a-gltf-instance>
      <a-gltf-instance position="1.4398 -0.120 0" ></a-gltf-instance>
      <a-gltf-instance position="1.654 -0.057 0"></a-gltf-instance>
    </a-entity>

    <a-entity id="bluePlaneSeatsEntity"
              gltf-model="#lowPolyPlaneSeat"
              instance-gltf
              rotation="0 -90 -90"
              scale="0.06 0.06 0.06"
              mixin="narrationModelItemMixin">
      {% for fillPosition in seatFillPositions %}
        {% for row in range(0, fillPosition.row) %}
          {% for col in range(0, fillPosition.col) %}
            {% if fillPosition.rotation %}
              <a-gltf-instance position="{{ fillPosition.startPos.x + col * xOffset}} {{ fillPosition.startPos.y + row * -yOffset }} 0" rotation="{{ fillPosition.rotation.x }} {{ fillPosition.rotation.y }} {{ fillPosition.rotation.z }}"></a-gltf-instance>
            {% else %}
              <a-gltf-instance position="{{ fillPosition.startPos.x + col * xOffset}} {{ fillPosition.startPos.y + row * -yOffset }} 0"></a-gltf-instance>
            {% endif %}
          {% endfor %}
        {% endfor %}
      {% endfor %}
    </a-entity>

  </a-entity>
</a-entity>